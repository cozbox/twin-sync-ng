{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TwinSync++ desired state",
  "type": "object",
  "properties": {
    "packages": {
      "type": "object",
      "properties": {
        "packages": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "source": {"type": "string"},
              "ensure": {"type": "string", "enum": ["present", "absent"]}
            },
            "required": ["name"],
            "additionalProperties": true
          }
        }
      },
      "required": ["packages"],
      "additionalProperties": true
    },
    "services": {
      "type": "object",
      "properties": {
        "services": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "enabled": {"type": "boolean"},
              "running": {"type": "boolean"}
            },
            "required": ["name"],
            "additionalProperties": true
          }
        }
      },
      "required": ["services"],
      "additionalProperties": true
    },
    "files": {
      "type": "object",
      "properties": {
        "files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {"type": "string"},
              "twin_path": {"type": "string"},
              "managed": {"type": "boolean"},
              "mode": {"type": "string"},
              "owner": {"type": "string"},
              "group": {"type": "string"}
            },
            "required": ["path", "twin_path"],
            "additionalProperties": true
          }
        }
      },
      "required": ["files"],
      "additionalProperties": true
    },
    "network": {
      "type": "object",
      "properties": {
        "backend": {"type": "string"},
        "profiles": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "kind": {"type": "string"},
              "backend": {"type": "string"},
              "autoconnect": {"type": "boolean"},
              "priority": {"type": "integer"}
            },
            "required": ["id"],
            "additionalProperties": true
          }
        }
      },
      "additionalProperties": true
    },
    "desktop": {
      "type": "object",
      "properties": {
        "backend": {"type": "string"},
        "settings": {"type": "object"}
      },
      "additionalProperties": true
    },
    "containers": {
      "type": "object",
      "properties": {
        "backend": {"type": "string"},
        "services": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "image": {"type": "string"},
              "ensure": {"type": "string"}
            },
            "required": ["name"],
            "additionalProperties": true
          }
        }
      },
      "additionalProperties": true
    },
    "cron": {
      "type": "object",
      "properties": {
        "entries": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "schedule": {"type": "string"},
              "command": {"type": "string"},
              "enabled": {"type": "boolean"}
            },
            "required": ["command", "schedule"],
            "additionalProperties": true
          }
        }
      },
      "additionalProperties": true
    },
    "home_assistant": {
      "type": "object",
      "properties": {
        "config_files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {"type": "string"},
              "managed": {"type": "boolean"},
              "twin_path": {"type": "string"}
            },
            "required": ["path"],
            "additionalProperties": true
          }
        }
      },
      "additionalProperties": true
    },
    "logs_config": {
      "type": "object",
      "properties": {
        "systemd_journal": {"type": "object"},
        "files": {"type": "object"},
        "home_assistant": {"type": "object"}
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
